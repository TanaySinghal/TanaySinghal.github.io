(this["webpackJsonphaptic-library"]=this["webpackJsonphaptic-library"]||[]).push([[0],{365:function(e,t,a){e.exports=a(469)},370:function(e,t,a){},469:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),o=a(15),c=a.n(o),s=(a(370),a(89)),l=a(90),u=a(126),f=a(125),d=a(207),p=a.n(d),m=(a(374),a(470),a(516)),b={apiKey:"AIzaSyCyUpfgybbCqs3QyDPDUinJpdOLXa7vvWo",authDomain:"hapticlibrary-39e0e.firebaseapp.com",databaseURL:"https://hapticlibrary-39e0e.firebaseio.com",projectId:"hapticlibrary-39e0e",storageBucket:"hapticlibrary-39e0e.appspot.com",messagingSenderId:"931367278707",appId:"1:931367278707:web:a39e9a14f7f55cfab13206",measurementId:"G-FLJZG4RVL8"},h=function(){function e(){var t=this;Object(s.a)(this,e),this.db=void 0,this.storage=void 0,this.haptics=function(){return t.db.collection("haptics")},p.a.initializeApp(b),this.db=p.a.firestore(),this.storage=p.a.storage()}return Object(l.a)(e,[{key:"getStorageRef",value:function(e){return this.storage.ref().child("HapticFiles/"+e)}},{key:"deleteHapticFileFromStorage",value:function(e){this.storage.ref().child("HapticFiles/"+e).delete()}},{key:"addHaptic",value:function(e,t,a,n,r,i,o){var c=this,s=Object(m.a)(),l=this.getStorageRef(s),u=l.put(n),f=n.name.split(".").pop();u.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;r(t)}),(function(e){i(e)}),(function(){l.updateMetadata({contentDisposition:"attachment; filename="+n.name});var r={ID:s,Title:e,Author:"Tanay",Description:t,Tags:a,BlobType:f||"",BlobPath:u.snapshot.ref.fullPath};c.haptics().doc(s).set(r),o()}))}},{key:"deleteHaptic",value:function(e){this.haptics().doc(e).delete(),this.deleteHapticFileFromStorage(e)}}]),e}(),g=i.a.createContext(null),v=h,y=a(246),O=a.n(y),j=a(83),E=a(349),w=a(350),S=a.n(w),T=a(499),R=a(500),x=a(501),D=a(502),P=a(503),C=a(504),k=a(505),A=a(506),F=a(507),H=a(508),L=a(509),I=a(510),B=a(511),U=a(512),W=a(513),J={Add:Object(r.forwardRef)((function(e,t){return i.a.createElement(T.a,Object.assign({},e,{ref:t}))})),Check:Object(r.forwardRef)((function(e,t){return i.a.createElement(R.a,Object.assign({},e,{ref:t}))})),Clear:Object(r.forwardRef)((function(e,t){return i.a.createElement(x.a,Object.assign({},e,{ref:t}))})),Delete:Object(r.forwardRef)((function(e,t){return i.a.createElement(D.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(r.forwardRef)((function(e,t){return i.a.createElement(P.a,Object.assign({},e,{ref:t}))})),Edit:Object(r.forwardRef)((function(e,t){return i.a.createElement(C.a,Object.assign({},e,{ref:t}))})),Export:Object(r.forwardRef)((function(e,t){return i.a.createElement(k.a,Object.assign({},e,{ref:t}))})),Filter:Object(r.forwardRef)((function(e,t){return i.a.createElement(A.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(r.forwardRef)((function(e,t){return i.a.createElement(F.a,Object.assign({},e,{ref:t}))})),LastPage:Object(r.forwardRef)((function(e,t){return i.a.createElement(H.a,Object.assign({},e,{ref:t}))})),NextPage:Object(r.forwardRef)((function(e,t){return i.a.createElement(P.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(r.forwardRef)((function(e,t){return i.a.createElement(L.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(r.forwardRef)((function(e,t){return i.a.createElement(x.a,Object.assign({},e,{ref:t}))})),Search:Object(r.forwardRef)((function(e,t){return i.a.createElement(I.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(r.forwardRef)((function(e,t){return i.a.createElement(B.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(r.forwardRef)((function(e,t){return i.a.createElement(U.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(r.forwardRef)((function(e,t){return i.a.createElement(W.a,Object.assign({},e,{ref:t}))}))},M=[{title:"Title",field:"Title",render:function(e){return i.a.createElement("a",{download:e.Title+"."+e.BlobType,href:e.DownloadURL},e.Title)}},{title:"Author",field:"Author"},{title:"Tags",field:"Tags"},{title:"Description",field:"Description"}],z=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={data:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(E.a)(O.a.mark((function e(){var t,a=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.props.firebase).haptics().onSnapshot((function(e){var n=e.docs.map((function(e){return e.data()})),r=n.map((function(e){return t.getStorageRef(e.ID).getDownloadURL()}));Promise.all(r).then((function(e){var t=e.map((function(e,t){return Object(j.a)(Object(j.a)({},n[t]),{},{DownloadURL:e})}));a.setState({data:t})}))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.firebase,t=this.state.data.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{Tags:e.Tags?e.Tags.join(", "):""})}));return i.a.createElement(S.a,{title:"Haptic Library",columns:M,data:t,icons:J,localization:{body:{editRow:{deleteText:"Are you sure you want to delete this haptic effect?"}}},style:{padding:"20px"},editable:{onRowDelete:function(t){return new Promise((function(a){setTimeout((function(){a(),e.deleteHaptic(t.ID)}),600)}))}},components:{Container:function(e){return i.a.createElement(i.a.Fragment,null,e.children)}},options:{pageSize:20}})}}]),a}(r.Component),N=a(358),G=a(92),K=a(329),V=a(347),q=a(327),Q=a(339),X=a(514),Z=a(357),$=a.n(Z);!function(e){e.Error="error",e.Warning="warning",e.Info="info",e.Success="success"}(n||(n={}));var _={file:void 0,title:"",description:"",tags:[],uploadProgress:void 0,alertSeverity:void 0,alertText:""},Y=32,ee=188,te={maxWidth:"360px",marginTop:"20px",marginBottom:"20px",display:"flex",flexWrap:"wrap"},ae=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).onFile=function(e){var t=e.target.files,a=t?t[0]:void 0;if(a){var n=a.name.split(".")[0];r.setState({file:a,title:n})}else r.setState({file:a});if(a){var i=new FileReader;i.onload=function(e){if(i.result){var t=JSON.parse(i.result.toString());if("Metadata"in t){var a=t.Metadata;if("Description"in a){var n=a.Description;r.setState({description:n})}}}},i.readAsText(a)}},r.onSubmit=function(e){var t=r.props.firebase,a=r.state,i=a.title,o=a.description,c=a.tags,s=a.file;if(e.preventDefault(),0!==i.length)if(s){t.addHaptic(i,o,c,s,(function(e){r.setState({uploadProgress:e})}),(function(e){}),(function(){r.setState(Object(j.a)(Object(j.a)({},_),{},{alertSeverity:n.Success,alertText:"Uploaded "+i+"!"}))}))}else r.setState({alertSeverity:n.Error,alertText:"Please upload a file."});else r.setState({alertSeverity:n.Error,alertText:"Please enter a title."})},r.state=Object(j.a)({},_),r}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.alertSeverity,n=t.alertText,r=t.description,o=t.file,c=t.tags,s=t.title,l=t.uploadProgress;return i.a.createElement(i.a.Fragment,null,i.a.createElement(G.a,{variant:"h6"},"Add AHAP Entry"),i.a.createElement("form",{onSubmit:this.onSubmit},i.a.createElement(K.a,{variant:"outlined",component:"label",color:"primary",style:te},"Upload File",i.a.createElement("input",{id:"contained-button-file",name:"File",type:"file",style:{display:"none"},onChange:this.onFile})),o&&i.a.createElement(V.a,{style:te,label:"Selected: "+o.name}),i.a.createElement(q.a,{name:"Title",value:s,onChange:function(t){return e.setState({title:t.target.value})},type:"text",label:"Title",variant:"outlined",style:te}),i.a.createElement(q.a,{name:"Description",value:r,onChange:function(t){return e.setState({description:t.target.value})},type:"text",label:"Description",variant:"outlined",style:te}),i.a.createElement($.a,{value:c,onAdd:function(t){return e.setState({tags:[].concat(Object(N.a)(c),[t])})},onDelete:function(t,a){return e.setState({tags:c.filter((function(e,t){return t!==a}))})},newChipKeyCodes:[ee,Y],label:"Tags",variant:"outlined",style:te}),i.a.createElement(K.a,{type:"submit",color:"primary",variant:"contained",style:te},"Add Haptics"),void 0!==l&&i.a.createElement(Q.a,{variant:"determinate",style:te,value:l}),a&&i.a.createElement(X.a,{severity:a},n)))}}]),a}(r.Component),ne=a(498),re=a(190),ie={padding:"50px",margin:"20px"},oe=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return i.a.createElement(g.Consumer,null,(function(e){if(e)return i.a.createElement(ne.a,{maxWidth:"md"},i.a.createElement(re.a,{style:ie},i.a.createElement(G.a,{variant:"h4"},"Haptic Library"),i.a.createElement("br",null),i.a.createElement(G.a,{variant:"subtitle1"},"Welcome to the Haptic Library! This tool lets you easily share haptic sensations designed for ",i.a.createElement("a",{href:"https://developer.apple.com/documentation/corehaptics"},"iOS Core Haptics"),", which is available on iOS 13 and on iPhone 8 or newer. To design these experiences, consider using tools such as ",i.a.createElement("a",{href:"https://medium.com/flawless-app-stories/haptrix-core-haptics-designer-241a47b78cd"},"Haptrix"),". After uploading, you can then view these sensations in a client app for iOS (ask Tanay for access)."),i.a.createElement("br",null),i.a.createElement(G.a,{variant:"subtitle1"},"NOTE: AHAP files with audio are currently not supported.")),i.a.createElement(re.a,{style:ie},i.a.createElement(ae,{firebase:e})),i.a.createElement(re.a,{style:ie},i.a.createElement(z,{firebase:e})))}))}}]),a}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(g.Provider,{value:new v},i.a.createElement(oe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[365,1,2]]]);
//# sourceMappingURL=main.96cf523e.chunk.js.map